# ДЗ1.Сбермаркет

## Выполнил Фильков Василий ИУ8-71

### Вариант 15 mod 10 = 5

### Задание

1.Составить DFD-диаграмму 1-го уровня системы.
2. Перечислить угрозы, идентифицированные и описанные по STRIDE (5-7
угроз)
3. Для перечисленных угроз составить деревья способов реализации угроз.
4. Ранжировать угрозы с помощью методики DREAD.

### 1. Описание площадки

Сбермаркет это B2P сервис, на котором любой зарегистрированный пользователь может покупать товары из нужного для него магазина.

Главная страница магазина 

![Untitled](%D0%94%D0%971%20%D0%A1%D0%B1%D0%B5%D1%80%D0%BC%D0%B0%D1%80%D0%BA%D0%B5%D1%82%20d20af037d90a4d138df6f4a616fdbdd1/Untitled.png)

Мы можем увидеть подборки по магазину и поискать нужные нам товары.

На данный момент мы незарегистрированный пользователь, следовательно , нам 

доступны весь функционал сайта кроме непосредственного оформление заказа. Для него нам нужно перейти в статус зарегистрированного пользователя.

Список функционала сайта:

1. Выбор магазина или ресторана 

![Untitled](%D0%94%D0%971%20%D0%A1%D0%B1%D0%B5%D1%80%D0%BC%D0%B0%D1%80%D0%BA%D0%B5%D1%82%20d20af037d90a4d138df6f4a616fdbdd1/Untitled%201.png)

1. Поиск по продуктам

![Untitled](%D0%94%D0%971%20%D0%A1%D0%B1%D0%B5%D1%80%D0%BC%D0%B0%D1%80%D0%BA%D0%B5%D1%82%20d20af037d90a4d138df6f4a616fdbdd1/Untitled%202.png)

1. Выбор по категория

![Untitled](%D0%94%D0%971%20%D0%A1%D0%B1%D0%B5%D1%80%D0%BC%D0%B0%D1%80%D0%BA%D0%B5%D1%82%20d20af037d90a4d138df6f4a616fdbdd1/Untitled%203.png)

1. Характеристика товара

![Untitled](%D0%94%D0%971%20%D0%A1%D0%B1%D0%B5%D1%80%D0%BC%D0%B0%D1%80%D0%BA%D0%B5%D1%82%20d20af037d90a4d138df6f4a616fdbdd1/Untitled%204.png)

**В случае если вы зарегистрируетесь** и перейдёте в статус зарегистрированного пользователя

вам станет доступны:

1.Корзина 

![Untitled](%D0%94%D0%971%20%D0%A1%D0%B1%D0%B5%D1%80%D0%BC%D0%B0%D1%80%D0%BA%D0%B5%D1%82%20d20af037d90a4d138df6f4a616fdbdd1/Untitled%205.png)

1. Сведенья о личном аккаунте

![Untitled](%D0%94%D0%971%20%D0%A1%D0%B1%D0%B5%D1%80%D0%BC%D0%B0%D1%80%D0%BA%D0%B5%D1%82%20d20af037d90a4d138df6f4a616fdbdd1/Untitled%206.png)

Таким образом для описания последующей DFD-диаграммы можно
предположить наличие в ней следующих компонентов:

### Базы данных:

БД Пользователей

БД Администраторов

БД Разработчиков

БД Магазинов

БД Заказов 

### Котроллеры:

Пользовательский 

Сервисный

Административный

### Пользователи:

Незарегистрированные пользователи

Зарегистрированные пользователи

Администратор 

Разработчик

### 2. DFD- диаграмма

Составим DFD-диаграмму контекста площадки Сбермаркет (для
диаграммы 1-го уровня объекты будут перенумерованы)

Считаем , что у курьеров отдельное приложение не входящее в наш пул задач

![Untitled](%D0%94%D0%971%20%D0%A1%D0%B1%D0%B5%D1%80%D0%BC%D0%B0%D1%80%D0%BA%D0%B5%D1%82%20d20af037d90a4d138df6f4a616fdbdd1/Untitled%207.png)

![Untitled](%D0%94%D0%971%20%D0%A1%D0%B1%D0%B5%D1%80%D0%BC%D0%B0%D1%80%D0%BA%D0%B5%D1%82%20d20af037d90a4d138df6f4a616fdbdd1/Untitled%208.png)

![Untitled](%D0%94%D0%971%20%D0%A1%D0%B1%D0%B5%D1%80%D0%BC%D0%B0%D1%80%D0%BA%D0%B5%D1%82%20d20af037d90a4d138df6f4a616fdbdd1/Untitled%209.png)

1) Незарегистрированный пользователь делает запрос:

- Показа списка товаров
- Показа списка категорий
- Показа списка ресторанов/магазинов
- Показа характеристик продукта на сайте
- Регистрации на сайте

2) Незарегистрированный пользователь получает ответ:

- список товаров
- список категорий
- список ресторанов
- список характеристик продукта
- форму регистрации

3) Зарегистрированный пользователь получает ответ:

- то же ,что и незарегистрированный
- входа на сайт
- перехода в личный кабинет
- перехода в любимые товары
- заказа товаров

4)  Зарегистрированный пользователь делает запрос:

- то же ,что и незарегистрированный
- форма входа
- страница личного кабинета
- страница любимых товаров
- страница заказа товара

5) Контроллер запросов пользователей передает запрос в сервис
аутентификации:

- регистрации
- входа на сайт

6) Контроллер запросов пользователей получает ответ:

- сессия пользователя (с учетом политик)
- форму регистрации нового пользователя

7) Сервис аутентификации запрашивает данные о политике
аутентифицированных пользователей.

8) Политика аутентифицированных пользователей возвращает запрошенные
данные

9) Контроллер запросов пользователей запрашивает список товаров, категорий, ресторанов у
контроллера товаров

10) Контроллер товаров возвращает запрошенные списки

11) Контроллер запросов пользователей направляет запрос покупателя в сервис
обработки заказов (покупатель делает заказ с доставкой.

12) Сервис обработки заказов отправляет обратную связь о созданном заказе
продавцу и покупателю.

13) Разработчик отправляет новые алгоритмы, WEB-страницы, код,
улучшающие , меняющие работу сервиса.

14) Новые алгоритмы, WEB-страницы и код отправляются в контроллер
объявлений.

15) Контроллер товаров запрашивает список товаров(обычный/по
параметрам).

16) Контроллер товаров получает запрошенный список товаров.

17) Контроллер товаров запрашивает список категорий(обычный/по
параметрам).

18) Контроллер товаров получает запрошенный список категорий.

19) Сервис обработки заказов получает запрошенную информацию

20) Сервис обработки заказов запрашивает информацию о товарах в
рамках которого обрабатывается заказ, у контроллера объявлений

21)Сервис обработки заказов запрашивает информацию о заказе.

22)Сервис обработки заказов сохраняет информацию о заказе в БД заказов.

23) Модерация сайта изменяет данные о категориях товаров

24) Модерация сайта изменяет данные о товарах

25) Модерация сайта изменяет данные о списке ресторанов и магазинов

26) Сервис аутентификации запрашивает данные о политике
аутентифицированных пользователей.

27) Политика аутентифицированных пользователей возвращает запрошенные
данные

28) Сервис модерации запрашивает сессию администратора у
административной политики

29) Административная политика сообщает запрошенную информацию об
административной сессии.

30) Политика посетителей запрашивает данные о пользователе у контроллера
данных пользователей.

31) Контроллер данных пользователей отправляет данные о запрошенном
пользователе в политику посетителей.

32) Контроллер данных пользователей возвращает запрошенные данные о
пользователе.

33) Политика аутентифицированных пользователей запрашивает данные о
пользователе у контроллера данных пользователей.

34) Административная политика запрашивает данные пользователя у
контроллера данных пользователей.

35) Контроллер данных пользователей отправляет запрошенные данные.

36) Контроллер данных пользователей запрашивает данные пользователя;

37) Контроллер данных пользователей получает данные пользователя.

38) Сервис аутентификации запрашивает данные о политике Администрирования

39) Политика Администрирования возвращает запрошенные данные

41) Контроллер товаров получает список ресторанов и магазинов

42) Контроллер товаров запрашивает список ресторанов и магазинов

43) Политика посетителей возвращает запрошенные данные

44) Сервис аутентификации запрашивает данные о политике посетителей.

## 3.Деревья угроз

1. Утечка ПД пользователей.
2. DOS сервиса обработки запросов пользователей.
3. Изменение данных или функционала сбермаркета
4. Утечка УЗ разработчика.
5. Утечка УЗ администратора.
6. Использование небезопасных алгоритмов обработки данных.
7. DOS сервиса аутентификации пользователей.
8. Раскрытие внутренней информации сбермаркета (структуры, отделы, планировки,
ip-адреса и т.д.).
9. DOS сервиса модерации.
10. DOS сервиса обработки заказов.
11. Смена банковских данных , перехват операций.

Для некоторые угроз построим деревья согласно методологии STRIDE. Каждый
лист помечен соответствующей буквой:
• Spoofing - подмена личности или роли в системе сбермаркет.
• Tampering - изменение данных или функциональности системы сбермаркет.
• Repudiation - отрицание ответственности за действия в системе сбермаркет
(очистка логов/журналов).
• Information disclosure - получение доступа к конфиденциальным
данным в системе сбермаркет.
• Denial of Service - перегружение системы сбермаркет или сети большим
количеством запросов или не валидными запросами, чтобы замедлить или
остановить обработку запросов от легитимных посетителей.
• Elevation of privilege - получение более высоких прав или доступа к
системе сбермаркет, чем положено в рамках ответа

Проведём оценку DREAD для данной угрозы. 

- **D**amage potential (потенциальный ущерб) .
- **R**eproducibility (повторяемость).
- **E**xploitability (простота организации атаки).
- **A**ffected users (затронутые пользователи).
- **D**iscoverability (простота обнаружения).

| Обозначение | Критерий | Высокий бал (10-8) | Средний бал (7-4) | Низкий бал (3-1) |
| --- | --- | --- | --- | --- |
| D1 | Потенциальный ущерб | Злоумышленник может получить практически неограниченный доступ к системе — права легального пользователя (администратора), как для управления, так и для получения доступа к информации в ней. | Утечка ценной информации | Утечка некритичной информации |
| R | Повторяемость | Атака может быть повторена без каких-либо ограничений. Атака имеет место в случае, если программный продукт установлен со значениями по умолчанию. | Атака может быть повторена только по прошествии некоторого времени или при определённых условиях. | Атаку очень сложно повторить, даже зная об уязвимости |
| E | Лёгкость организации атаки | Начинающий программист может произвести атаку в короткие сроки. Атака может быть произведена с любого компьютера сети Интернет. Атаку может произвести анонимный пользователь сети или пользователь с учётной записью «Гость» | Опытный программист может произвести атаку | Для проведения атаки требуются хорошо подготовленные и оснащённые специалисты |
| A | Охваченные пользователи | Все пользователи (например, в случае если уязвимость открывается при установке приложения с опциями по умолчанию), все ключевые заказчики и т.д. | Некоторые пользователи, при определенных опциях установки и конфигурирования | Очень малое число всех пользователей приложения, либо негативному эффекту подвергаются анонимные пользователи сети, но при этом они не являются конечными пользователями приложения |
| D2 | Лёгкость обнаружения | Информация об уязвимости известна широкому кругу лиц, уязвимость часто эксплуатируется. Это типичная ошибка. Ошибка имеет место в предыдущей версии приложения | Информация об уязвимости доступна только ограниченному кругу лиц | Уязвимость (ошибка) мало известна конечным пользователям продукта и мало вероятно, что она может быть найдена в их повседневной работе с продуктом. |

Рассмотрим **утечку учётной записи пользователя.**

![Untitled](%D0%94%D0%971%20%D0%A1%D0%B1%D0%B5%D1%80%D0%BC%D0%B0%D1%80%D0%BA%D0%B5%D1%82%20d20af037d90a4d138df6f4a616fdbdd1/Untitled%2010.png)

[Оценка DREAD](%D0%94%D0%971%20%D0%A1%D0%B1%D0%B5%D1%80%D0%BC%D0%B0%D1%80%D0%BA%D0%B5%D1%82%20d20af037d90a4d138df6f4a616fdbdd1/%D0%9E%D1%86%D0%B5%D0%BD%D0%BA%D0%B0%20DREAD%20f9641732603c4b9082624bf50226208f.csv)

Рассмотрим **утечку учётной записи разработчика или администратора.**

![Untitled](%D0%94%D0%971%20%D0%A1%D0%B1%D0%B5%D1%80%D0%BC%D0%B0%D1%80%D0%BA%D0%B5%D1%82%20d20af037d90a4d138df6f4a616fdbdd1/Untitled%2011.png)

[Оценка Dread](%D0%94%D0%971%20%D0%A1%D0%B1%D0%B5%D1%80%D0%BC%D0%B0%D1%80%D0%BA%D0%B5%D1%82%20d20af037d90a4d138df6f4a616fdbdd1/%D0%9E%D1%86%D0%B5%D0%BD%D0%BA%D0%B0%20Dread%204ffd30b271ae491abc707649ecf6d5e3.csv)

Рассмотрим угрозу **DOS сервиса аутентификация**

![Untitled](%D0%94%D0%971%20%D0%A1%D0%B1%D0%B5%D1%80%D0%BC%D0%B0%D1%80%D0%BA%D0%B5%D1%82%20d20af037d90a4d138df6f4a616fdbdd1/Untitled%2012.png)

 

Рассмотрим угрозу **DOS сервиса обработки заказов , DOS модерации**

![Untitled](%D0%94%D0%971%20%D0%A1%D0%B1%D0%B5%D1%80%D0%BC%D0%B0%D1%80%D0%BA%D0%B5%D1%82%20d20af037d90a4d138df6f4a616fdbdd1/Untitled%2013.png)

![Untitled](%D0%94%D0%971%20%D0%A1%D0%B1%D0%B5%D1%80%D0%BC%D0%B0%D1%80%D0%BA%D0%B5%D1%82%20d20af037d90a4d138df6f4a616fdbdd1/Untitled%2014.png)

Оценки ставились на основе моих предположений так как мы однозначно не можем судить о реализации функций внутри сайта сбермаркета ,так как я не являюсь разработчиком системы и не занимаю руководящие должности в компании.

### Вывод

В результате моделирования угроз наиболее приоритетными оказались:

- Утечка УЗ разработчика или администратора
- DOS аутентификации пользователей

Такой результат соответствует  предположениями о том , что в случае утечки УЗ разработчика или администратора можно получить неограниченный доступ к сайту и не слишком сложен в реализации.

DOS аутентификации пользователей легко осуществима и параллизует работу сайта так как пользователи не смогу сделать заказ.

Наименее приоритетной угрозой является смена банковских данных или перехват операций эта проблема хоть и несёт в себе критическую важность , но она почти не реализуема.